/**
 * angular-bootstrap-scrolling-tabs
 * @version v1.1.0
 * @link https://github.com/mikejacobson/angular-bootstrap-scrolling-tabs
 * @author Mike Jacobson <michaeljjacobson1@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(t,e){"use strict";function n(t){this.stc=t}function o(t){this.stc=t}function i(t){this.stc=t}function r(t,e,r){var a=this;r=r||{},a.$tabsContainer=t,a.$timeout=e,a.movableContainerLeftPos=0,a.scrollArrowsVisible=!1,a.scrollToTabEdge=!1,a.scrollMovement=new i(a),a.eventHandlers=new o(a),a.elementsHandler=new n(a),a.scrollingTabsActiveOffset=r.scrollingTabsActiveOffset||0}function a(e,n){function o(t){return n.trustAsHtml(t)}return{restrict:"E",template:b,transclude:!1,replace:!0,scope:{tabs:"@",watchTabs:"=",propPaneId:"@",propTitle:"@",propActive:"@",propDisabled:"@",localTabClick:"&tabClick",refreshOn:"="},link:function(n,i,a){var s=new r(i,e),l=a.scrollToTabEdge&&"true"===a.scrollToTabEdge.toLowerCase();if(n.tabsArr=n.$eval(n.tabs),n.propPaneId=n.propPaneId||"paneId",n.propTitle=n.propTitle||"title",n.propActive=n.propActive||"active",n.propDisabled=n.propDisabled||"disabled",n.sanitize=o,i.on("click.scrollingTabs",".nav-tabs > li",function(e){var o=t(this).data();n.localTabClick({$event:e,$index:o.index,tab:o.tab})}),a.refreshOn&&n.$watch("refreshOn",function(t,e){t&&t!==e&&s.handleTriggeredRefresh()}),!a.watchTabs)return void s.initTabs({isWrapperDirective:!1,scrollToTabEdge:l,scrollingTabsActiveOffset:a.scrollingTabsActiveOffset});n.$watch("watchTabs",function(t,o){var r,a;n.tabsArr=n.$eval(n.tabs),t.length&&t[t.length-1].active?e(function(){i.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0):(r=i.find(".nav-tabs > li.active"),r.length&&(a=r.data("index"),n.tabsArr.some(function(t){if(t[n.propActive])return t[n.propActive]=!1,!0}),n.tabsArr[a][n.propActive]=!0)),s.initTabs({isWrapperDirective:!1,isWatchingTabs:!0,scrollToTabEdge:l})},!0)}}}function s(t){return{restrict:"A",template:d,transclude:!0,replace:!0,link:function(e,n,o){function i(t){s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,isWatchingTabs:!0,scrollToTabEdge:b,isWatchingDom:t&&t.isWatchingDom})}function a(){function o(){return r=s.find("li.active").index(),r!==a&&(a=r,i({isWatchingDom:!0})),!1}var r,a,s=n.find("ul.nav-tabs");s.length&&(e.$watch(function(){return s[0].childNodes.length},function(t,e){t!==e&&i({isWatchingDom:!0})}),e.$watch(function(){return t(o,0,!1),s.find("li.active").index()},angular.noop))}var s=new r(n,t,{scrollingTabsActiveOffset:o.scrollingTabsActiveOffset}),l=n.find("uib-tabset").length>0,c=l||n.find("tabset, .scrtabs-tabs-movable-container div > ul.nav").length>0,b=o.scrollToTabEdge&&"true"===o.scrollToTabEdge.toLowerCase(),d={hasTabContentOutsideMovableContainer:!0};if(angular.extend(e,{scrtc:d}),o.refreshOn&&e.$watch(o.refreshOn,function(t,e){t&&t!==e&&s.handleTriggeredRefresh()}),c||(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),!l&&!o.watchTabs)return void s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,scrollToTabEdge:b});(!(l||o.watchTabs&&"true"===o.watchTabs.toLowerCase())||(c&&(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),i(),t(a,10),l&&o.watchTabs&&"true"!==o.watchTabs.toLowerCase()))&&e.$watch(o.watchTabs,function(e,o){c?l&&e.length&&e[e.length-1].active&&t(function(){n.find(".scrtabs-tabs-movable-container ul.nav-tabs > li:last").find('a[role="tab"],a.nav-link').click()},0):e.length&&e[e.length-1].active&&t(function(){n.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0),i()},!0)}}}var l=angular.module("mj.scrollingTabs",[]),c={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,DATA_KEY_IS_MOUSEDOWN:"ismousedown"};!function(t,e){var n=function(t,e,n){var o;return function(){function i(){n||t.apply(r,a),o=null}var r=this,a=arguments;o?clearTimeout(o):n&&t.apply(r,a),o=setTimeout(i,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize.scrtabs",n(t)):this.trigger(e)}}(jQuery,"smartresize");var b=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container">','       <ul class="nav nav-tabs" role="tablist">',"         <li ng-class=\"{ 'active': tab[propActive || 'active'], ","                         'disabled': tab[propDisabled || 'disabled'] }\" ",'             data-tab="{{tab}}" data-index="{{$index}}" ng-repeat="tab in tabsArr">',"           <a ng-href=\"{{'#' + tab[propPaneId || 'paneId']}}\" role=\"tab\"","                data-toggle=\"{{tab[propDisabled || 'disabled'] ? '' : 'tab'}}\" ","                ng-bind-html=\"sanitize(tab[propTitle || 'title']);\">","           </a>","         </li>","       </ul>","     </div>"," </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join(""),d=['<div class="scrtabs-tab-wrapper-container" ng-class="{ \'force-height\': !scrtc.hasTabContentOutsideMovableContainer }">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container" ng-transclude></div>',"   </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join("");!function(n){n.initElements=function(t){var e=this,n=e.stc;n.$tabsContainer;e.setElementReferences(),t.isWrappingAngularUITabset&&e.moveTabContentOutsideScrollContainer(t),e.setEventListeners()},n.moveTabContentOutsideScrollContainer=function(t){var e,n,o=this,i=o.stc,r=i.$tabsContainer,a=r.find(".scrtabs-tabs-movable-container .tab-content");if(!t.isWatchingTabs)return void a.show().appendTo(r);n=a.clone().addClass("scrtabs-tab-content-clone"),e=r.find(".scrtabs-tab-content-clone"),e.length?e.replaceWith(n):r.append(n)},n.refreshAllElementSizes=function(){var t,e=this,n=e.stc,o=n.scrollMovement,i=n.scrollArrowsVisible,r={didScrollToActiveTab:!1};return e.setElementWidths(),e.setScrollArrowVisibility(),n.scrollArrowsVisible&&e.setFixedContainerWidthForJustVisibleScrollArrows(),(n.scrollArrowsVisible||i)&&(n.scrollArrowsVisible?(t=o.getMinPos(),n.movableContainerLeftPos<t?o.incrementScrollRight(t):(o.scrollToActiveTab({isOnWindowResize:!0}),r.didScrollToActiveTab=!0)):(n.movableContainerLeftPos=0,o.slideMovableContainerToLeftPos())),r},n.removeTranscludedTabContentOutsideMovableContainer=function(){this.stc.$tabsContainer.find(".scrtabs-tab-content-outside-movable-container").remove()},n.setElementReferences=function(){var n=this,o=n.stc,i=o.$tabsContainer;o.isNavPills=!1,o.$fixedContainer=i.find(".scrtabs-tabs-fixed-container"),o.$movableContainer=i.find(".scrtabs-tabs-movable-container"),o.$tabsUl=o.$movableContainer.find(".nav-tabs"),o.$tabsUl.length||(o.$tabsUl=o.$movableContainer.find(".nav-pills"),o.$tabsUl.length&&(o.isNavPills=!0)),o.$tabsLiCollection=o.$tabsUl.find("> li"),o.$leftScrollArrow=i.find(".scrtabs-js-tab-scroll-arrow-left"),o.$rightScrollArrow=i.find(".scrtabs-js-tab-scroll-arrow-right"),o.$scrollArrows=o.$leftScrollArrow.add(o.$rightScrollArrow),o.$win=t(e)},n.setElementWidths=function(){var t=this,e=t.stc;e.$win&&(e.containerWidth=e.$tabsContainer.outerWidth(),e.winWidth=e.$win.width(),e.scrollArrowsCombinedWidth=e.$leftScrollArrow.outerWidth()+e.$rightScrollArrow.outerWidth(),t.setFixedContainerWidth(),t.setMovableContainerWidth())},n.setEventListeners=function(){var t=this,e=t.stc,n=e.eventHandlers;e.$leftScrollArrow.off(".scrtabs").on({"mousedown.scrtabs touchstart.scrtabs":function(t){n.handleMousedownOnLeftScrollArrow.call(n,t)},"mouseup.scrtabs touchend.scrtabs":function(t){n.handleMouseupOnLeftScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnLeftScrollArrow.call(n,t)}}),e.$rightScrollArrow.off(".scrtabs").on({"mousedown.scrtabs touchstart.scrtabs":function(t){n.handleMousedownOnRightScrollArrow.call(n,t)},"mouseup.scrtabs touchend.scrtabs":function(t){n.handleMouseupOnRightScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnRightScrollArrow.call(n,t)}}),e.$win.smartresize(function(t){n.handleWindowResize.call(n,t)})},n.setFixedContainerWidth=function(){var t=this,e=t.stc,n=e.$tabsContainer.get(0).getBoundingClientRect();e.fixedContainerWidth=n.width||n.right-n.left,e.$fixedContainer.width(e.fixedContainerWidth)},n.setFixedContainerWidthForJustHiddenScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth)},n.setFixedContainerWidthForJustVisibleScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth-e.scrollArrowsCombinedWidth)},n.setMovableContainerWidth=function(){var e=this,n=e.stc,o=n.$tabsUl.find("li"),i=n.$fixedContainer.height(),r=10;for(n.movableContainerWidth=0,o.length&&(o.each(function(){var e=t(this),o=0;n.isNavPills&&(o=parseInt(e.css("margin-left"),10)+parseInt(e.css("margin-right"),10)),n.movableContainerWidth+=e.outerWidth()+o}),n.movableContainerWidth+=1,n.movableContainerWidth<n.fixedContainerWidth&&(n.movableContainerWidth=n.fixedContainerWidth)),n.$movableContainer.width(n.movableContainerWidth);n.$movableContainer.height()>i&&r--;)n.$movableContainer.width(n.movableContainerWidth+=1)},n.setScrollArrowVisibility=function(){var t=this,e=t.stc,n=e.movableContainerWidth>e.fixedContainerWidth;n&&!e.scrollArrowsVisible?(e.$scrollArrows.show(),e.scrollArrowsVisible=!0,t.setFixedContainerWidthForJustVisibleScrollArrows()):!n&&e.scrollArrowsVisible&&(e.$scrollArrows.hide(),e.scrollArrowsVisible=!1,t.setFixedContainerWidthForJustHiddenScrollArrows())}}(n.prototype),function(t){t.handleClickOnLeftScrollArrow=function(t){this.stc.scrollMovement.incrementScrollLeft()},t.handleClickOnRightScrollArrow=function(t){var e=this,n=e.stc,o=n.scrollMovement;o.incrementScrollRight(o.getMinPos())},t.handleMousedownOnLeftScrollArrow=function(t){this.stc.scrollMovement.startScrollLeft()},t.handleMousedownOnRightScrollArrow=function(t){this.stc.scrollMovement.startScrollRight()},t.handleMouseupOnLeftScrollArrow=function(t){this.stc.scrollMovement.stopScrollLeft()},t.handleMouseupOnRightScrollArrow=function(t){this.stc.scrollMovement.stopScrollRight()},t.handleWindowResize=function(t){var e=this,n=e.stc,o=n.$win.width();if(o===n.winWidth)return!1;n.winWidth=o,n.elementsHandler.refreshAllElementSizes()}}(o.prototype),function(e){e.continueScrollLeft=function(){var t=this,e=t.stc;e.$timeout(function(){e.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN)&&e.movableContainerLeftPos<0&&(t.incrementScrollLeft()||t.continueScrollLeft())},c.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.continueScrollRight=function(t){var e=this,n=e.stc;n.$timeout(function(){n.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN)&&n.movableContainerLeftPos>t&&(e.incrementScrollRight(t)||e.continueScrollRight(t))},c.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.decrementMovableContainerLeftPos=function(t){var e=this,n=e.stc;n.movableContainerLeftPos-=n.fixedContainerWidth/c.SCROLL_OFFSET_FRACTION,n.movableContainerLeftPos<t?n.movableContainerLeftPos=t:n.scrollToTabEdge&&(e.setMovableContainerLeftPosToTabEdge("right"),n.movableContainerLeftPos<t&&(n.movableContainerLeftPos=t))},e.getMinPos=function(){var t=this,e=t.stc;return e.scrollArrowsVisible?e.fixedContainerWidth-e.movableContainerWidth-e.scrollArrowsCombinedWidth:0},e.getMovableContainerCssLeftVal=function(){var t=this,e=t.stc;return 0===e.movableContainerLeftPos?"0":e.movableContainerLeftPos+"px"},e.incrementScrollLeft=function(){var t=this,e=t.stc;return e.movableContainerLeftPos+=e.fixedContainerWidth/c.SCROLL_OFFSET_FRACTION,e.movableContainerLeftPos>0?e.movableContainerLeftPos=0:e.scrollToTabEdge&&(t.setMovableContainerLeftPosToTabEdge("left"),e.movableContainerLeftPos>0&&(e.movableContainerLeftPos=0)),t.slideMovableContainerToLeftPos(),0===e.movableContainerLeftPos},e.incrementScrollRight=function(t){var e=this,n=e.stc;return e.decrementMovableContainerLeftPos(t),e.slideMovableContainerToLeftPos(),n.movableContainerLeftPos===t},e.scrollToActiveTab=function(t){var e,n,o,i,r,a,s,l,c,b=this,d=b.stc,f=0;d.scrollArrowsVisible&&(e=d.$tabsUl.find("li.active"),e.length&&(o=e.offset().left,n=e.outerWidth(),i=o+n+parseInt(d.scrollingTabsActiveOffset||0,10),r=d.$rightScrollArrow.offset().left,a=d.$leftScrollArrow.outerWidth(),s=a,l=r,o<s?(f=o-s,d.movableContainerLeftPos=d.movableContainerLeftPos-f):i>l&&(f=i-l,d.movableContainerLeftPos=d.movableContainerLeftPos-f),f?(c=b.getMinPos(),d.movableContainerLeftPos<c?d.movableContainerLeftPos=c:d.movableContainerLeftPos>0&&(d.movableContainerLeftPos=0),b.slideMovableContainerToLeftPos()):d.scrollingTabsActiveOffset&&d.handleArrowsClassNames("left")))},e.setMovableContainerLeftPosToTabEdge=function(e){var n=this,o=n.stc,i=-o.movableContainerLeftPos,r=0;o.$tabsLiCollection.each(function(n){var a=t(this).width();if((r+=a)>i)return o.movableContainerLeftPos="left"===e?-(r-a):-r,!1})},e.slideMovableContainerToLeftPos=function(){var t,e=this,n=e.stc;n.movableContainerLeftPos=n.movableContainerLeftPos/1,t=e.getMovableContainerCssLeftVal(),n.$movableContainer.stop().animate({left:t},"slow",function(){var t=e.getMinPos();if(n.movableContainerLeftPos<t&&(e.decrementMovableContainerLeftPos(t),n.$movableContainer.stop().animate({left:e.getMovableContainerCssLeftVal()},"fast")),n.scrollingTabsActiveOffset){var o;n.movableContainerLeftPos<=0&&n.movableContainerLeftPos>=-2?o="left":n.movableContainerLeftPos-t>=0&&n.movableContainerLeftPos-t<=2&&(o="right"),n.handleArrowsClassNames(o)}})},e.startScrollLeft=function(){var t=this;t.stc.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollLeft()},e.startScrollRight=function(){var t=this;t.stc.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollRight(t.getMinPos())},e.stopScrollLeft=function(){this.stc.$leftScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,!1)},e.stopScrollRight=function(){this.stc.$rightScrollArrow.data(c.DATA_KEY_IS_MOUSEDOWN,!1)}}(i.prototype),function(t){t.handleTriggeredRefresh=function(){var t=this,e=t.scrollMovement;t.elementsHandler.refreshAllElementSizes(!0).didScrollToActiveTab||t.$timeout(function(){e.scrollToActiveTab({isOnTabsRefresh:!0})},t.scrollingTabsActiveOffset?200:100)},t.initTabs=function(t){var e=this,n=e.elementsHandler,o=e.scrollMovement;t.scrollToTabEdge&&(e.scrollToTabEdge=!0),e.$timeout(function(){var e;n.initElements(t),e=n.refreshAllElementSizes(),e.didScrollToActiveTab||o.scrollToActiveTab({isOnTabsRefresh:t.isWatchingTabs})},100)},t.removeTranscludedTabContentOutsideMovableContainer=function(){this.elementsHandler.removeTranscludedTabContentOutsideMovableContainer()},t.handleArrowsClassNames=function(t){var e=this,n="scrtabs-tab-scroll-arrow--is-on-edge",o={left:e.$leftScrollArrow,right:e.$rightScrollArrow};t?(o[t].addClass(n),o["left"==t?"right":"left"].removeClass(n)):(o.left.removeClass(n),o.right.removeClass(n))}}(r.prototype),l.directive("scrollingTabs",a),a.$inject=["$timeout","$sce"],l.directive("scrollingTabsWrapper",s),s.$inject=["$timeout"]}(jQuery,window);